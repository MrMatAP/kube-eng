#
# Main configuration file for your cluster
# Top-level variables with an underscore in them are overridden by the Makefile
# Variables within a dictionary must be edited straight in the cluster configuration file
---
dist_dir: ""
admin_password: ""
cluster_name: ""
prometheus_chart: ""
alloy_chart: ""
minio_operator_chart: ""
minio_tenant_chart: ""
loki_chart: ""
keycloak_chart: ""
grafana_chart: ""
jaeger_chart: ""
kiali_chart: ""
cloud_provider_mdns: ""
user_id: ""

cluster:
  control_plane_nodes: 1
  worker_nodes: 3
  mesh: istio-experimental
  istio_profile: minimal
  gateway_api: true
  cert_manager_ns: cert-manager
  edge_ns: edge
  edge_name: edge-ingress
  edge: istio-gateway-api-experimental
  domain: local

host:
  tools:
    kind: /opt/homebrew/bin/kind
    istioctl: /opt/homebrew/bin/istioctl
    kubectl: /opt/homebrew/bin/kubectl
    kustomize: /opt/homebrew/bin/kustomize
    docker: /usr/local/bin/docker
    named: /opt/homebrew/sbin/named
    step: /opt/homebrew/bin/step
  cloud_provider_kind:
    enabled: true
    url: https://github.com/kubernetes-sigs/cloud-provider-kind/releases/download/v0.6.0/cloud-provider-kind_0.6.0_darwin_arm64.tar.gz
  cloud_provider_mdns:
    enabled: true
  resolver:
    enabled: false
    forwarder: 8.8.8.8
  pki:
    enabled: true
    name: local-pki
    port: 9000
  registry:
    enabled: true
    name: registry
    port: 5001
    image: "registry:2"
    volume:
      name: "registry-volume"
  postgresql:
    enabled: true
    name: pg
    port: 5432
    image: "postgres:15"
    volume:
      name: "pg-volume"
  minio:
    enabled: false
    name: minio
    port: 9000
    image: "minio/minio"
    volume:
      name: "minio-volume"
    console:
      port: 9001

stack:
  prometheus:
    enabled: true
    ns: stack
    hostname: prometheus
  alloy:
    enabled: false
    ns: stack
    hostname: alloy
  loki:
    enabled: false
    ns: stack
  keycloak:
    enabled: true
    ns: stack
    hostname: keycloak
  grafana:
    enabled: true
    ns: stack
    hostname: grafana
    client_id: grafana
    admin_user: admin
  jaeger:
    enabled: true
    ns: stack
    hostname: jaeger
  kiali:
    enabled: true
    ns: stack
    hostname: kiali

preheat:
# Cluster
- registry: registry.k8s.io
  repository: coredns
  image: coredns
  tag: v1.11.3
# Istio
- registry: docker.io
  repository: istio
  image: pilot
  tag: 1.25.2
- registry: docker.io
  repository: istio
  image: proxyv2
  tag: 1.25.2
# Prometheus
- registry: quay.io
  repository: prometheus-operator
  image: prometheus-config-reloader
  tag: v0.78.2
- registry: quay.io
  repository: prometheus
  image: prometheus
  tag: v3.0.1
- registry: quay.io
  repository: prometheus
  image: node-exporter
  tag: v1.8.2
- registry: registry.k8s.io
  repository: kube-state-metrics
  image: kube-state-metrics
  tag: v2.14.0
# Alloy
- registry: docker.io
  repository: grafana
  image: alloy
  tag: v1.8.2
- registry: quay.io
  repository: prometheus-operator
  image: prometheus-config-reloader
  tag: v0.81.0
# Keycloak
- registry: quay.io
  repository: keycloak
  image: keycloak-operator
  tag: 26.2.2
- registry: quay.io
  repository: keycloak
  image: keycloak
  tag: 26.2.2
# Grafana
- registry: docker.io
  repository: grafana
  image: grafana
  tag: 11.6.0
- registry: docker.io
  repository: library
  image: busybox
  tag: 1.31.1
- registry: docker.io
  repository: curlimages
  image: curl
  tag: 8.9.1
# Jaeger
- registry: ghcr.io
  repository: open-telemetry/opentelemetry-operator
  image: opentelemetry-operator
  tag: 0.124.0
- registry: docker.io
  repository: jaegertracing
  image: jaeger
  tag: latest
# Kiali
- registry: quay.io
  repository: kiali
  image: kiali-operator
  tag: v2.8.0
- registry: quay.io
  repository: kiali
  image: kiali
  tag: v2.8.0
# cert-manager
- registry: quay.io
  repository: jetstack
  image: cert-manager-controller
  tag: v1.17.2
- registry: quay.io
  repository: jetstack
  image: cert-manager-controller
  tag: v1.17.2
- registry: quay.io
  repository: jetstack
  image: cert-manager-cainjector
  tag: v1.17.1

